<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>反射神経ゲーム｜世界のゲームアソビバ</title>

    <link rel="stylesheet" href="../../assets/css/style.css">

    <style>
      .area {
        position: relative;
        width: 260px;
        height: 260px;
        margin: 20px auto;
        background: #f1f5ff;
        border-radius: 16px;
      }
      .target {
        position: absolute;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: #2563eb;
        cursor: pointer;
      }
      .info {
        text-align: center;
        margin-top: 10px;
        font-size: 16px;
      }
    </style>
  </head>

  <body>
    <div class="container">
      <div class="topbar">
        <a class="btn" href="../../index.html">← ゲーム一覧へ</a>
        <h1>反射神経ゲーム</h1>
      </div>

      <div class="game-card">
        <p>10秒間で何回クリックできるか？</p>

        <div class="area" id="area">
          <div class="target" id="target"></div>
        </div>

        <div class="info" id="info">
          残り時間：10秒｜スコア：0
        </div>

        <div style="margin-top:12px;">
          <button id="start">スタート</button>
        </div>
      </div>
    </div>

    <script>
      const area = document.getElementById("area");
      const target = document.getElementById("target");
      const info = document.getElementById("info");
      const startBtn = document.getElementById("start");

      let score = 0;
      let time = 10;
      let timer = null;
      let playing = false;

      function moveTarget() {
        const maxX = area.clientWidth - target.clientWidth;
        const maxY = area.clientHeight - target.clientHeight;
        const x = Math.random() * maxX;
        const y = Math.random() * maxY;
        target.style.left = x + "px";
        target.style.top = y + "px";
      }

      target.addEventListener("click", () => {
        if (!playing) return;
        score++;
        moveTarget();
        info.textContent = `残り時間：${time}秒｜スコア：${score}`;
      });

      startBtn.addEventListener("click", () => {
        if (playing) return;

        score = 0;
        time = 10;
        playing = true;
        info.textContent = `残り時間：${time}秒｜スコア：${score}`;
        moveTarget();

        timer = setInterval(() => {
          time--;
          info.textContent = `残り時間：${time}秒｜スコア：${score}`;

          if (time <= 0) {
            clearInterval(timer);
            playing = false;
            info.textContent = `終了！スコア：${score}`;
          }
        }, 1000);
      });
    </script>
  </body>
</html>
